webpackJsonp([44],{Nxa9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Gu7T"),i=a.n(n),r=a("zjrN"),c=a("/DwW"),s={components:{NewTable:r.a},data:function(){var t=this;return{a:[],b:[],c:[],d:[],hasNext:!1,branch:"",gridding:"",managerAccount:"",type:"",tBody:[],columns:[{title:"维度",key:"name",fixed:"",width:90,align:"center"},{title:"渠道类型",key:"trenchType",width:90,align:"center",render:function(e,a){return e("div",t.hasNext?{attrs:{class:"can-click"},on:{click:function(){t._toDetail(a.row.trenchType)}}}:{},a.row.trenchType)}},{title:"月新增",key:"monthNewIncremental",width:80,align:"center",render:function(t,e){return t("div",{},e.row.monthNewIncremental?e.row.monthNewIncremental.toFixed(3):e.row.monthNewIncremental)}},{title:"渠道新增",key:"trenchNewIncremental",width:80,align:"center",render:function(t,e){return t("div",{},e.row.trenchNewIncremental?e.row.trenchNewIncremental.toFixed(3):e.row.trenchNewIncremental)}},{title:"占比%",key:"proportion",width:80,align:"center",render:function(t,e){return t("div",{},e.row.proportion?e.row.proportion.toFixed(3):e.row.proportion)}},{title:"月环比%",key:"monthChainRelativeRatio",width:80,align:"center",render:function(t,e){return t("div",{},e.row.monthChainRelativeRatio?e.row.monthChainRelativeRatio.toFixed(3):e.row.monthChainRelativeRatio)}}],selectBolA:!1,selectBolB:!1,updateText:""}},mounted:function(){var t=this,e=this;Object(c.n)(function(a){e.a=a.branchList,e.d=a.typeList;var n=JSON.parse(localStorage.getItem("role")),i=n.role,r=n.branch,c=n.gridding;switch(i){case 1:t._getListFn();break;case 2:e.branch=r,e.selectBolA=!0,e._changeA(),e._getListFn();break;case 3:e.branch=r,e.gridding=c,e.selectBolA=!0,e.selectBolB=!0,e._changeA(),e._changeB(),e._getListFn()}})},methods:{_getListFn:function(){var t=this;t.tBody=[],Object(c.m)({branch:t.branch,gridding:t.gridding,managerAccount:t.managerAccount,type:t.type},function(e){t.updateText=e.description;var a=[];e.data.forEach(function(t){a.indexOf(t.name)<0?a.push(t.name):t.name=""}),t.tBody=[].concat(i()(e.data)),t.columns[0].fixed="left"})},_changeA:function(){var t=this;t.a.forEach(function(e){e.name===t.branch&&(t.b=e.griddings)}),1===JSON.parse(localStorage.getItem("role")).role&&(t.gridding="",t.managerAccount=""),t._getListFn()},_changeB:function(){var t=this;t.managerAccount="",t.b.forEach(function(e){e.name===t.gridding&&(t.c=e.managers)}),t._getListFn()},_changeC:function(){this.hasNext=""!==this.managerAccount,this._getListFn()},_toDetail:function(t){var e=this.branch,a=this.gridding,n=this.managerAccount,i=this.$route.path;this.$router.push(i+"/"+e+"/"+a+"/"+n+"/"+t)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"capacity-wrap common-width"},[a("div",{staticClass:"capacity-search-wrap"},[a("div",{staticClass:"search-wrap"},[a("div",{staticClass:"search-items-wrap"},[a("div",{staticClass:"search-items"},[a("span",{staticClass:"items-title"},[t._v("分公司：")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{disabled:t.selectBolA},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.branch=e.target.multiple?a:a[0]},t._changeA]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.a,function(e,n){return a("option",{key:n,domProps:{value:e.name}},[t._v(t._s(e.name))])})],2)])]),t._v(" "),a("div",{staticClass:"search-items"},[a("span",{staticClass:"items-title"},[t._v("网格：")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.gridding,expression:"gridding"}],attrs:{disabled:t.selectBolB},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.gridding=e.target.multiple?a:a[0]},t._changeB]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.b,function(e,n){return a("option",{key:n,domProps:{value:e.name}},[t._v(t._s(e.name))])})],2)])])]),t._v(" "),a("div",{staticClass:"search-items-wrap"},[a("div",{staticClass:"search-items"},[a("span",{staticClass:"items-title"},[t._v("一线经理：")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.managerAccount,expression:"managerAccount"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.managerAccount=e.target.multiple?a:a[0]},t._changeC]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.c,function(e,n){return a("option",{key:n,domProps:{value:e.account}},[t._v(t._s(e.name))])})],2)])]),t._v(" "),a("div",{staticClass:"search-items"},[a("span",{staticClass:"items-title"},[t._v("类型：")]),t._v(" "),a("div",{staticClass:"select-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.type=e.target.multiple?a:a[0]},t._getListFn]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.d,function(e,n){return a("option",{key:n,domProps:{value:e}},[t._v(t._s(e))])})],2)])])])])]),t._v(" "),""!==t.updateText?a("div",{staticClass:"update-wrap",domProps:{textContent:t._s(t.updateText)}}):t._e(),t._v(" "),a("div",{staticClass:"capacity-view-wrap"},[a("div",{staticClass:"new-table-list-wrap"},[a("new-table",{attrs:{columns:t.columns,data:t.tBody}})],1)]),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("router-view")],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("YGCy")},"data-v-4a790e6e",null);e.default=l.exports},YGCy:function(t,e){}});