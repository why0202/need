webpackJsonp([56],{"1lz3":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("IhBI"),n=a("rZ/o"),r=a("4AKl"),s=a("FeFv"),c=a("tRgf"),i={components:{Headers:o.a,BScroll:n.a,TopBar:r.a,VTable:s.a},data:function(){return{barData:[],year:this.$route.params.month.split("-")[0],month:"",tHead:["","目标值","完成值","完成率","排名"],clickHeaderNumber:[0],tBody:[],tFoot:[],show:!1,columns:[]}},computed:{_setTitle:function(){return this.$route.params.street+" "+this.month+"月 销售收入考核进度表(万元)"}},mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("yearData"));e.length&&e.forEach(function(e){t.columns.push(e.name),e.name===t.year&&(t.barData=e.children.map(function(e){return e.str===t.$route.params.month.split("-")[1]&&(e.active=!0),e}))})},methods:{onCancel:function(){this.show=!1},onConfirm:function(t){this.year=t,this.onCancel()},_headClick:function(){var t=this.$route.path;t=t.replace(/\d{4}-\d{2}/,this.year+"-"+this.month),this.$router.push(t+"/manager")},_barClick:function(t){t&&(this.month=t.str)},_getApi:function(){var t=this,e=this;e.$post("/incomecheckprogress/findSalesGroupByManager",{month:e.year+"-"+e.month,branch:e.$route.params.name,gridding:e.$route.params.street}).then(function(a){e.tHead[0]=a.boxhead,e.tBody=[],e.tFoot=[],a.data.forEach(function(a){e.tBody.push({name:a.name,text:[a.name,""+Object(c.c)(a.goal),""+Object(c.c)(a.complete),""+t._setColor(a.percentageComplete,a.timeProgressType),a.ranking]})}),e.tFoot=["合计",Object(c.c)(a.statistics.goal),Object(c.c)(a.statistics.complete),Object(c.c)(a.statistics.percentageComplete)+"%",""]})},_setColor:function(t,e){return 1===e?t?'<i class="icon-color green-color"></i><span class="green-color">'+Object(c.c)(t)+"%</span>":"-":2===e?t?'<i class="icon-color yellow-color"></i><span class="yellow-color">'+Object(c.c)(t)+"%</span>":"-":3===e?t?'<i class="icon-color red-color"></i><span class="red-color">'+Object(c.c)(t)+"%</span>":"-":void 0}},watch:{month:function(){this._getApi()},year:function(t,e){var a=this;t!==e&&JSON.parse(localStorage.getItem("yearData")).forEach(function(e){e.name===t&&(a.year=e.name,a.barData=e.children)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"street-wrap common-width"},[a("headers",{attrs:{showRight:""}}),t._v(" "),a("div",{staticClass:"top-date-wrap"},[a("div",{staticClass:"year-wrap",on:{click:function(e){t.show=!0}}},[t._v(t._s(t.year)+"年")]),t._v(" "),a("div",{staticClass:"month-wrap"},[a("top-bar",{attrs:{data:t.barData},on:{barClick:t._barClick}})],1)]),t._v(" "),a("div",{staticClass:"title-wrap",domProps:{textContent:t._s(t._setTitle)}}),t._v(" "),a("div",{staticClass:"next-content-wrap"},[a("v-table",{attrs:{seniority:"",clickHeade:"",tHeader:t.tHead,clickHeaderNumber:t.clickHeaderNumber,tBody:t.tBody,tFoot:t.tFoot},on:{headClick:t._headClick}})],1),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("router-view")],1)],1)},staticRenderFns:[]};var h=a("VU/8")(i,l,!1,function(t){a("I6+i")},"data-v-3565fd84",null);e.default=h.exports},"I6+i":function(t,e){}});