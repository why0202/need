webpackJsonp([2],{"7sgP":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("IhBI"),n=a("mvHQ"),i=a.n(n),r=a("rZ/o"),o=a("tRgf"),c={components:{BScroll:r.a},data:function(){return{tBody:[]}},mounted:function(){this._getApi()},methods:{_getApi:function(){var t=this;t.$post("/synergyorder/findHaveDone",{pageNum:1,pageSize:9999}).then(function(e){t.tBody=[],e.data.forEach(function(e){t.tBody.push(e)})})},_doSome:function(t){localStorage.setItem("sendData",i()(t)),this.$router.push("/menu/task/detail/"+t.id)}},watch:{$route:function(t,e){}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"already-wrap common-width"},[a("div",{staticClass:"already-content-wrap"},[a("div",{staticClass:"table-wrap"},[t._m(0),t._v(" "),a("b-scroll",[a("table",{staticClass:"content-table"},[a("thead",{staticClass:"hide-header"},[a("tr",{attrs:{border:"0"}},[a("th",[t._v("协同内容")]),t._v(" "),a("th",{attrs:{width:"55"}},[t._v("处理人")]),t._v(" "),a("th",{attrs:{width:"60"}},[t._v("状态")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("操作")])])]),t._v(" "),a("tbody",[0===t.tBody.length?a("tr",[a("td",{staticClass:"not-date",attrs:{colspan:"5"}},[t._v("没有数据")])]):t._l(t.tBody,function(e,s){return a("tr",{key:s},[a("td",{domProps:{textContent:t._s(e.issue)}}),t._v(" "),a("td",{attrs:{width:"55"},domProps:{textContent:t._s(e.handlerName)}}),t._v(" "),a("td",{class:1===e.status?"":2===e.status?"":"error",attrs:{width:"60"},domProps:{textContent:t._s(1===e.status?"未处理":2===e.status?"已处理":"已驳回")}}),t._v(" "),a("td",{staticClass:"do",attrs:{width:"50"},on:{click:function(a){return t._doSome(e)}}},[t._v("查看")])])})],2)])])],1)]),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("router-view")],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("table",[e("thead",[e("tr",{attrs:{border:"0"}},[e("th",[this._v("协同内容")]),this._v(" "),e("th",{attrs:{width:"55"}},[this._v("处理人")]),this._v(" "),e("th",{attrs:{width:"60"}},[this._v("状态")]),this._v(" "),e("th",{attrs:{width:"50"}},[this._v("操作")])])])])}]};var l=a("VU/8")(c,d,!1,function(t){a("TA0/")},"data-v-68c9147f",null).exports,v={components:{BScroll:r.a},data:function(){return{tBody:[]}},mounted:function(){localStorage.removeItem("removeSendData"),this._getApi()},methods:{_getApi:function(){var t=this;t.$post("/synergyorder/findBacklog",{pageNum:1,pageSize:9999}).then(function(e){t.tBody=[],e.data.forEach(function(e){e.time=Object(o.a)(e.createTime,!0),t.tBody.push(e)})})},_doSome:function(t){localStorage.setItem("sendData",i()(t)),this.$router.push("/menu/task/synergy/"+t.id)}},watch:{$route:function(t,e){}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backlog-wrap common-width"},[a("div",{staticClass:"backlog-content-wrap"},[a("div",{staticClass:"table-wrap"},[t._m(0),t._v(" "),a("b-scroll",[a("table",{staticClass:"content-table"},[a("thead",{staticClass:"hide-header"},[a("tr",{attrs:{border:"0"}},[a("th",[t._v("协同内容")]),t._v(" "),a("th",{attrs:{width:"55"}},[t._v("发起人")]),t._v(" "),a("th",{attrs:{width:"80"}},[t._v("创建时间")]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v("操作")])])]),t._v(" "),a("tbody",[0===t.tBody.length?a("tr",[a("td",{staticClass:"not-date",attrs:{colspan:"5"}},[t._v("没有数据")])]):t._l(t.tBody,function(e,s){return a("tr",{key:s},[a("td",{domProps:{textContent:t._s(e.issue)}}),t._v(" "),a("td",{attrs:{width:"55"},domProps:{textContent:t._s(e.initiatorName)}}),t._v(" "),a("td",{attrs:{width:"80"},domProps:{textContent:t._s(e.time)}}),t._v(" "),a("td",{staticClass:"do",attrs:{width:"50"},on:{click:function(a){return t._doSome(e)}}},[t._v("处理")])])})],2)])])],1)]),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("router-view")],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("table",[e("thead",[e("tr",{attrs:{border:"0"}},[e("th",[this._v("协同内容")]),this._v(" "),e("th",{attrs:{width:"55"}},[this._v("发起人")]),this._v(" "),e("th",{attrs:{width:"80"}},[this._v("创建时间")]),this._v(" "),e("th",{attrs:{width:"50"}},[this._v("操作")])])])])}]};var h=a("VU/8")(v,u,!1,function(t){a("8M1R")},"data-v-5aa236cc",null).exports,_={components:{Headers:s.a,BScroll:r.a},data:function(){return{managerType:1,synergyCandidateList:[],synergyContentList:[],text:"",show:!1,showText:""}},computed:{_setActive:function(){return function(t){var e="";return this.managerType===t&&(e="active"),e}},_showText:function(){var t=this,e=!1;return this.synergyContentList.forEach(function(a,s){a.active&&s===t.synergyContentList.length-1&&(e=!0)}),e||(this.text=""),e}},mounted:function(){this._getListApi()},methods:{_chooseContent:function(t){this.synergyContentList.forEach(function(e,a){a===t&&(e.active=!e.active)})},_chooseCandidate:function(t){this.synergyCandidateList.forEach(function(e,a){e.active=a===t})},_saveApi:function(){var t=this,e=JSON.parse(localStorage.getItem("role")),a={address:t.$route.params.address,branch:e.branch,gridding:e.gridding,handlerAccount:"",issue:"",issueAddition:t.text};t.synergyCandidateList.filter(function(t){return t.active}).forEach(function(t){a.handlerAccount=t.managerAccount}),t.synergyContentList.filter(function(t){return t.active}).forEach(function(t){""===a.issue?a.issue+=t.text:a.issue+=","+t.text}),""!==a.handlerAccount?""!==a.issue?t.$dialog.confirm({title:"提示",message:"是否确定发起协同工单？"}).then(function(){t.$post("/synergyorder/save",a).then(function(){t.$toast.success({mask:!0,duration:1e3,message:"协同工单提交成功",onClose:function(){t.$router.go(-1)}})})}).catch(function(){}):t.$dialog.alert({message:"请选择协同内容"}):t.$dialog.alert({message:"请选择协同人员"})},_getListApi:function(){var t=this,e=JSON.parse(localStorage.getItem("role"));t.$post("/synergy/findSynergyContent",{branch:e.branch,gridding:e.gridding,managerType:t.managerType}).then(function(e){t.synergyCandidateList=e.synergyCandidateList.map(function(t){return{active:!1,text:t.managerName,managerAccount:t.managerAccount}}),t.synergyContentList=e.synergyContentList.map(function(t){return{active:!1,text:t}})})}},watch:{managerType:function(){this._getListApi()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"find-address-wrap common-width"},[a("div",{staticClass:"top-bar-wrap"},[a("div",{staticClass:"top-items",class:t._setActive(1)},[a("span",{on:{click:function(e){t.managerType=1}}},[t._v("网络经理")])]),t._v(" "),a("div",{staticClass:"top-items",class:t._setActive(2)},[a("span",{on:{click:function(e){t.managerType=2}}},[t._v("销售经理")])]),t._v(" "),a("div",{staticClass:"top-items",class:t._setActive(3)},[a("span",{on:{click:function(e){t.managerType=3}}},[t._v("商企经理")])])]),t._v(" "),a("div",{staticClass:"synergy-content-wrap"},[a("b-scroll",[a("div",{staticClass:"synergy-content"},[a("div",{staticClass:"synergy-candidate-list-wrap"},[a("div",{staticClass:"title"},[t._v("协同备选人员")]),t._v(" "),t.synergyCandidateList.length?a("div",{staticClass:"synergy-candidate-list-items"},t._l(t.synergyCandidateList,function(e,s){return a("div",{key:s,staticClass:"list-items",on:{click:function(e){return t._chooseCandidate(s)}}},[a("i",{class:{active:e.active}}),t._v(" "),a("p",{domProps:{textContent:t._s(e.text)}})])}),0):a("div",{staticClass:"not-candidateList"},[t._v("没有找到相关协同备选人员")])]),t._v(" "),a("div",{staticClass:"synergy-content-list-wrap"},[a("div",{staticClass:"title"},[t._v("协同内容项")]),t._v(" "),t._l(t.synergyContentList,function(e,s){return a("div",{key:s,staticClass:"synergy-content-list-items",on:{click:function(e){return t._chooseContent(s)}}},[a("i",{class:{active:e.active}}),t._v(" "),a("p",{domProps:{textContent:t._s(e.text)}})])})],2),t._v(" "),t._showText?a("div",{staticClass:"synergy-text-wrap"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]):t._e()])])],1),t._v(" "),a("div",{staticClass:"synergy-btn-wrap",on:{click:t._saveApi}},[t._v("提 交")])])},staticRenderFns:[]};var f=a("VU/8")(_,m,!1,function(t){a("eQhb")},"data-v-ba61b66a",null).exports,p={components:{Headers:s.a,Already:l,Backlog:h,FindAddress:f},data:function(){return{tabIndex:0,tabsData:[{name:"协同工作",active:!0,tabIndex:0,className:"a"},{name:"我的待办",active:!1,tabIndex:1,className:"b"},{name:"我的已办",active:!1,tabIndex:2,className:"c"}]}},methods:{_tabClick:function(t){this.tabsData.forEach(function(e){e.name===t.name?e.active=!0:e.active=!1}),this.tabIndex=t.tabIndex}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-wrap common-width"},[a("headers",{attrs:{showRight:""}}),t._v(" "),a("div",{staticClass:"task-view-wrap"},[a("div",{staticClass:"task-tabs-wrap"},t._l(t.tabsData,function(e,s){return a("div",{key:s,class:e.active?e.className+" active":e.className,on:{click:function(a){return t._tabClick(e,s)}}},[a("i"),t._v(" "),a("span",{domProps:{textContent:t._s(e.name)}})])}),0),t._v(" "),a("div",{staticClass:"view-wrap"},[a("already",{directives:[{name:"show",rawName:"v-show",value:2===t.tabIndex,expression:"tabIndex === 2"}]}),t._v(" "),a("backlog",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex === 1"}]}),t._v(" "),a("find-address",{directives:[{name:"show",rawName:"v-show",value:!t.tabIndex,expression:"!tabIndex"}]})],1),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(p,g,!1,function(t){a("mX0I")},"data-v-4a3ce9af",null);e.default=y.exports},"8M1R":function(t,e){},"TA0/":function(t,e){},eQhb:function(t,e){},mX0I:function(t,e){}});