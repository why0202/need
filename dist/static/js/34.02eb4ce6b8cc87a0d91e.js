webpackJsonp([34],{ItzE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("IhBI"),n=e("rZ/o"),s=e("4AKl"),r=e("FeFv"),c=e("tRgf"),i={components:{Headers:o.a,BScroll:n.a,TopBar:s.a,VTable:r.a},data:function(){return{barData:[],tabsIndex:0,month:"",title:"广州各公司全量收入考核进度表(万元)",tHead:["分公司","目标值","完成值","完成率","排名"],tBody:[],tFoot:[],isLinkNumberMax:1,year:(new Date).getFullYear(),show:!1,columns:[]}},mounted:function(){var t=this;(JSON.parse(localStorage.getItem("yearData"))||[]).forEach(function(a,e){t.columns.push(a.name),e||(t.barData=a.children)});var a=JSON.parse(localStorage.getItem("role")),e=a.role,o=a.branch,n=a.gridding;2===e?t.$router.replace("/menu/traction/"+t.year+"-"+t.month+"/"+t.tabsIndex+"/"+o):3===e&&t.$router.replace("/menu/traction/"+t.year+"-"+t.month+"/"+t.tabsIndex+"/"+o+"/grid/"+n)},methods:{onCancel:function(){this.show=!1},onConfirm:function(t){this.year=t,this.onCancel()},_barClick:function(t){t&&(this.month=t.str)},_changeTabs:function(t){this.title=1===t?"广州各公司销售收入考核进度表(万元)":"广州各公司全量收入考核进度表(万元)",this.tabsIndex!==t&&(this.tabsIndex=t,this._getApi())},_getApi:function(){var t=this,a=this,e=a.tabsIndex?"/incomecheckprogress/findSalesGroupByBranch":"/incomecheckprogress/findAllGroupByBranch";a.$post(e,{month:a.year+"-"+a.month}).then(function(e){a.tHead[0]=e.boxhead,a.tBody=[],a.tFoot=["合计",Object(c.c)(e.statistics.goal),Object(c.c)(e.statistics.complete),Object(c.c)(e.statistics.percentageComplete)+"%",""],e.data.forEach(function(e){a.tBody.push({name:e.name,text:[e.name,""+Object(c.c)(e.goal),""+Object(c.c)(e.complete),""+t._setColor(e.percentageComplete,e.timeProgressType),e.ranking]})})})},_trClick:function(t){var a=this.year,e=this.month,o=this.tabsIndex;this.$router.push("/menu/traction/"+a+"-"+e+"/"+o+"/"+t.name)},_setColor:function(t,a){return 1===a?t?'<i class="icon-color green-color"></i><span class="green-color">'+Object(c.c)(t)+"%</span>":"-":2===a?t?'<i class="icon-color yellow-color"></i><span class="yellow-color">'+Object(c.c)(t)+"%</span>":"-":3===a?t?'<i class="icon-color red-color"></i><span class="red-color">'+Object(c.c)(t)+"%</span>":"-":void 0}},watch:{month:function(){this._getApi()},year:function(t,a){var e=this;t!==a&&""!==a&&(JSON.parse(localStorage.getItem("yearData"))||[]).forEach(function(a){a.name===t&&(e.barData=a.children)})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"traction-wrap common-width"},[e("headers",{attrs:{showRight:""}}),t._v(" "),e("div",{staticClass:"top-date-wrap"},[e("div",{staticClass:"year-wrap",on:{click:function(a){t.show=!0}}},[t._v(t._s(t.year)+"年")]),t._v(" "),e("div",{staticClass:"month-wrap"},[e("top-bar",{ref:"vbar1",attrs:{data:t.barData},on:{barClick:t._barClick}})],1)]),t._v(" "),e("div",{staticClass:"tabs-wrap"},[e("div",{staticClass:"tabs-items",class:{active:0===t.tabsIndex},on:{click:function(a){return t._changeTabs(0)}}},[t._v("全量收入")]),t._v(" "),e("div",{staticClass:"tabs-items",class:{active:1===t.tabsIndex},on:{click:function(a){return t._changeTabs(1)}}},[t._v("销售收入")])]),t._v(" "),e("div",{staticClass:"title-wrap",domProps:{textContent:t._s(t.title)}}),t._v(" "),e("div",{staticClass:"next-content-wrap"},[e("v-table",{attrs:{seniority:"",tHeader:t.tHead,tBody:t.tBody,tFoot:t.tFoot,isLinkNumberMax:t.isLinkNumberMax},on:{trClick:t._trClick}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("router-view")],1)],1)},staticRenderFns:[]};var h=e("VU/8")(i,l,!1,function(t){e("TXV7")},"data-v-684025a0",null);a.default=h.exports},TXV7:function(t,a){}});